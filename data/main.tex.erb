\documentclass[a4paper,11pt]{article}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% This file is part of rdoc_pdf-latex.
% Copyright Â© 2011 Pegasus Alpha
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Variables used for the ERB template:
%
% babel_lang: Something like "ngerman", determines the babel language
%   to load
% doc_title:  Title of the documentation
% intro_text: Text for the first page, the file given via RDoc's -m option
% classes:    List of RDoc::ClassModule objects for all found classes.
% modules:    List of RDoc::ClassModule objects for all found modules.
% methods:    List of RDoc::MethodAttr objects for all found methods

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Packages
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[<%= babel_lang %>]{babel} %Hyphenation, etc.
\usepackage[utf8]{inputenc} %Input encoding: UTF-8
\usepackage[T1]{fontenc} %Output encoding: T1
\usepackage{lmodern} %Pretty fonts for T1
\usepackage{textcomp} %Useful things like \textdegree
\usepackage[official]{eurosym} %Official \euro symbol
\usepackage{lastpage} %Get a reference on the last page
\usepackage[lmargin=3cm,rmargin=3cm]{geometry}
\usepackage{fancyhdr} %Headers and footers
\usepackage{fancyvrb} %Better verbatim text
\usepackage{longtable}
%\usepackage{amsmath} %For math
%\usepackage{amsfonts} %Math fonts
%\usepackage[retainorgcmds]{IEEEtrantools} %For equations
%\usepackage{listings} %Syntax hightlighting
\usepackage{xcolor} %Colored text
%\usepackage{graphicx} %Graphics
\usepackage{titlesec} %Easily define new heading styles
\usepackage{titletoc} %For telling LaTeX where to put the new headings in the TOC
\usepackage[unicode=true,pdftex]{hyperref} %For hyperlinks

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% General information
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\author{\LaTeX PDF generator for RDoc}
\title{<%= doc_title %>}
\date{\today}

%Generate TOC only till level 2
\setcounter{tocdepth}{2}
%Disable section numbering
\setcounter{secnumdepth}{-2}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% New commands and environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% TODO: Make this a LaTeX package?

\titleclass{\subsubsubsection}{straight}[\subsubsection]
\titleformat{\subsubsubsection}[hang]{\raggedleft\sffamily\bfseries}{%
  \thesubsubsubsection}{1em}{}[\vspace{-3mm}\rule{\textwidth}{1pt}]
\titlespacing{\subsubsubsection}{0pt}{*1}{\baselineskip}
\newcounter{subsubsubsection}
\renewcommand{\thesubsubsubsection}{\thesubsubsection.\arabic{subsubsubsection}}
\titlecontents{subsubsubsection}[0pt]{}{\thecontentslabel}{}{\titlerule*[8pt]{.}\contentspage}

\titleclass{\microsection}{straight}[\subsubsubsection]
\titleformat{\microsection}[hang]{\vspace{\baselineskip}\sffamily\small\bfseries\slshape}{%
  \themicrosection}{1em}{}
\titlespacing{\microsection}{0pt}{*1}{\baselineskip}
\newcounter{microsection}
\renewcommand{\themicrosection}{\thesubsubsubsection.\arabic{microsection}}
\titlecontents{microsection}[0pt]{}{\thecontentslabel}{}{\titlerule*[8pt]{.}\contentspage}

\newcommand{\class}[2]{\subsection[#1]{{\normalfont\textsc{Class}} {#1}}\vspace{-3mm}{\footnotesize Parent: \texttt{#2}\par\vspace{\baselineskip}}}
\newcommand{\module}[1]{\subsection[#1]{{\normalfont\textsc{Module}} {#1}}}
\newcommand{\method}[1]{\subsubsubsection*{#1}}


%Code without specification
\newcommand{\code}[1]{\texttt{#1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Package-specific settings
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% fancyvrb
\fvset{fontsize=\scriptsize}

% hyperref
\hypersetup{colorlinks=true,urlcolor=blue}
\hypersetup{pdfauthor={\LaTeX PDF generator for RDoc},pdftitle={<%= doc_title %>}}

% fancyhdr
\pagestyle{fancy}
\fancyhf{} %Delete everything
\fancyhead[L]{<%= doc_title %>}
\fancyhead[R]{\thepage{} / \pageref*{LastPage}}
\setlength{\headheight}{14.5pt} %Otherwise LaTeX complains
\renewcommand{\headrulewidth}{0.4pt}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Document start
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\begin{titlepage}
  \begin{center}
    \Huge <%= doc_title %>
  \end{center}
  \begin{flushright}
    \rule{4.5cm}{0.1cm}\\
    \normalsize Generated \today\\
    \tiny by the PDF \LaTeX{} generator for RDoc
  \end{flushright}
\end{titlepage}

<%= intro_text %>

\clearpage
\hypersetup{linkcolor=black} %Red TOC looks absolutely awful
\tableofcontents
\hypersetup{linkcolor=red} %Restore original link color
\clearpage
  
\section{Methods overview}

\begin{itemize}
<% methods.each do |meth| %>
\item  \hyperref[%
  <%= meth.latex_label %>%
  ]%
  {%
  <%= meth.latexized(:name_prefix) + meth.latexized(:name) %> (<%= meth.parent.latexized :full_name %>)%
  }
<% end %>
\end{itemize}

\clearpage

\section{Class and module reference}
<% classes_and_modules.each do |mod| %>
  \input{<%= render_module(mod) %>}\clearpage %Always start a new page for a new class/module
<% end %>

\end{document}
