% This ERB template takes the following variables:
% mod: The module or class (RDoc::ClassModule) to document
%
%<% if mod.module? %>
  \module{<%= mod.latexized :full_name %>}\label{<%= mod.latex_label %>}
%<% else %>
  \class{<%= mod.latexized :full_name %>}\label{<%= mod.latex_label %>}
%<% end %>

<%= mod.description %>

\subsection{Method list}

%<% mod.method_list.sort_by{|m| m.name}.each_with_index do |meth, i| %>
  <%= i == 0 ? "" : "," %> \hyperref[<%= meth.latex_label %>]{<%= meth.latexized(:name_prefix) + meth.latexized(:name) %>}
%<% end %>

%<% consts = mod.constants.sort_by{|c| c.name} %>
%<% unless consts.empty? %>
  \subsection{Constants}
  
  \begin{tabular}{p{0.4\textwidth}p{0.2\textwidth}p{0.4\textwidth}}
<% consts.each do |const| %>\label{<%= const.latex_label %>}\small{\code{<%= const.latexized :name %>}} & \small{\code{<%= const.latexized_value %>}} & <%= const.description %> \\<% end %>
  \end{tabular}
%<% end %>

%<% [["Public class methods", true, :public],
   ["Protected class methods", true, :protected],
   ["Private class methods", true, :private],
   ["Public instance methods", false, :public],
   ["Protected instance methods", false, :protected],
   ["Private instance methods", false, :private]].each do |caption, is_singleton, visibility| %>
% <% meths = mod.method_list.select{|m|m.singleton == is_singleton && m.visibility == visibility}.sort_by{|m| m.name}%>
%
% <% unless meths.empty? %>
    \subsection{<%= caption %>}
%   <% meths.each do |meth| %>
      \subsubsection{<%= meth.latexized(:name_prefix) + meth.latexized(:name) %>}
      \label{<%= meth.latex_label %>}
      
      \begin{verbatim}
<%= meth.arglists %>
      \end{verbatim}
  
      \noindent{}<%= meth.description %>
  
%   <% end %>
% <% end %>
%<% end %>
